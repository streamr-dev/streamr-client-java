group 'com.streamr'
version '0.1-SNAPSHOT'

buildscript {
	repositories {
		mavenLocal()
		jcenter()
		maven {
			url "https://plugins.gradle.org/m2/"
		}
	}
	dependencies {
		classpath "com.netflix.nebula:nebula-project-plugin:3.4.0"
	}
}

apply plugin: 'java'
apply plugin: 'groovy'
apply plugin: 'nebula.facet'                    // Healthy defaults for a standard project
apply plugin: 'idea'
apply plugin: 'maven-publish'

sourceCompatibility = 1.8
targetCompatibility = 1.8

facets {
	integrationTest
}

sourceSets {
	test {
		groovy
	}
}

repositories {
	mavenCentral()
	// Ethereum Repository
	maven {
		url "https://dl.bintray.com/ethereum/maven/"
	}
}

dependencies {
    compile group: 'org.apache.logging.log4j', name: 'log4j-core', version: '2.7'
	compile group: 'com.squareup.okhttp3', name: 'okhttp', version: '3.10.0'
	compile group: 'com.squareup.moshi', name: 'moshi', version: '1.6.0'
	compile group: 'com.squareup.moshi', name: 'moshi-adapters', version: '1.6.0'
	compile group: 'com.squareup.okio', name: 'okio', version: '2.2.0'
	compile 'commons-codec:commons-codec:1.6'
	compile 'commons-lang:commons-lang:2.6'
	compile 'org.apache.commons:commons-lang3:3.1'
	compile 'cglib:cglib:3.2.10'
	compile 'org.objenesis:objenesis:3.0.1'
	compile 'org.ethereum:ethereumj-core:1.11.0-RELEASE'
	compile "org.java-websocket:Java-WebSocket:1.3.8"
	compile "org.cache2k:cache2k-api:1.2.1.Final"
	compile "org.cache2k:cache2k-core:1.2.1.Final"
	testCompile group: 'org.spockframework', name: 'spock-core', version: '1.1-groovy-2.4'
	integrationTestCompile group: 'org.spockframework', name: 'spock-core', version: '1.1-groovy-2.4'
}

jar {
	manifest {
		attributes(
			'Class-Path': configurations.compile.collect { it.getName() }.join(' '),
			'Main-Class': 'streamr.client.StreamrClient'
		)
	}
}

publishing {
	publications {
		maven(MavenPublication) {
			groupId = 'com.streamr'
			artifactId = 'client'
			version = '0.1-SNAPSHOT'

			from components.java
		}
	}
	repositories {
		mavenLocal()
		maven {
			credentials {
				username ''
				password ''
			}
			url 'https://oss.sonatype.org/content/repositories/snapshots'
		}
	}
}
